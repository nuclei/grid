<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>CSS Grid Web Component</title>
    <script src="./polyfill/webcomponents-lite.js"></script>
    <script type="text/javascript">
      window.nucleiGrid = {
        breakpoints: {
          s: 0,
          m: 600,
          l: 1000
        }
      }
    </script>
    <script src="grid.js"></script>
    <style media="screen">
      html{
        margin: 0;
      }
      :root{
        --grid-gutter: 10px;
        --grid-columns: 4;
        --grid-rows: 4;
      }
      @media (max-width: 600px) {
        :root{
          /*--grid-columns: 3;*/
          /*--grid-gutter: 100px;*/
        }
      }
      .mondrian{
        background: rgb(50,40,30);
        grid-template-rows: repeat(8, 75px);
        --grid-columns: 7;
        max-width: 800px;
        min-height: 500px;
      }
      .responsive-columns{
        padding: 5px;
        margin-top: 10px;
        background: FloralWhite;
        --grid-rows: repeat(6, 100px);
        --grid-columns: 6;
      }
      .responsive-columns div{
        color: white;
        font-family: sans-serif;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 3px;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <grid-container gutter="10" rowgutter="10" style="height: 300px;" breakpoints="0s 600m 1000l 1200xl">
      <div style="background: gold;" columns="2m" rows="2m" start-column="2m" start-row="2m"></div>
      <div style="background: Tomato;" columns="2s 1m" rows="2s 1m" start-column="3s 0m" start-row="3s 0m"></div>
    </grid-container>
    <grid-container class="mondrian" gutter="10s 20m 50l" rowgutter="10" breakpoints="0s 600m 1000l">
      <div style="background: FloralWhite;" columns="2" rows="1"></div>
      <div style="background: FloralWhite;" columns="3" rows="1"></div>
      <div style="background: gold;" columns="2" rows="1"></div>
      <div style="background: FloralWhite;" columns="2 1m" rows="2"></div>
      <div style="background: Tomato;" columns="5 4m" rows="4"></div>
      <div style="background: gold;" columns="1 2m" rows="2"></div>
      <div style="background: FloralWhite;" columns="1" rows="3"></div>
      <div style="background: FloralWhite;" columns="1" rows="2"></div>
      <div style="background: FloralWhite;" columns="1" rows="2"></div>
      <div style="background: FloralWhite;" start-column="4" columns="2" rows="1"></div>
      <div style="background: FloralWhite;" columns="2" rows="1"></div>
      <div style="background: gold;" columns="1" rows="2"></div>
      <div style="background: FloralWhite;" start-row="8" start-column="2" columns="2" rows="1"></div>
      <div style="background: FloralWhite;" start-column="4 2m" columns="2" rows="1"></div>
      <div style="background: steelblue;" columns="2" rows="1 2m"></div>
    </grid-container>
    <grid-container class="responsive-columns" rowgutter="5" autoflow>
      <div style="background: indigo;" columns="2m 3xs">An element on 2 columns</div>
      <div style="background: indigo;" columns="2m 3xs">An element on 2 columns</div>
      <div style="background: indigo;" columns="2m 3xs">An element on 2 columns</div>
      <div style="background: navy;" columns="3m 6xs">An element on 2 columns</div>
      <div style="background: navy;" columns="3m 6xs">An element on 2 columns</div>
      <div style="background: navy;" columns="3m 6xs">An element on 2 columns</div>
      <div style="background: indigo;" columns="2m 3xs">An element on 2 columns</div>
      <div style="background: DarkSlateBlue;" columns="1">1 column element</div>
    </grid-container>
    <script type="text/javascript">
      document.querySelector('.mondrian').addEventListener('sizechange', (e) => {
        console.log(e)
      })
    </script>
    <script type="text/javascript">
    let testing = (tries = 10, iterations = 10) => {
      let testDiv = document.createElement('div')
      document.body.appendChild(testDiv)
      var result = 0
      for (var b = 0; b < tries; b++ ) {
        var wc = []
        var start = window.performance.now()
        for (var i = 0; i < iterations; i++ ) {
          wc[i] = document.createElement('grid-container')
          testDiv.appendChild(wc[i])
        }
        var end = window.performance.now()
        var thisResult = end - start
        result += thisResult
        // for (var i = 0; i < iterations; i++ ) {
        //   wc[i].parentNode.removeChild(wc[i])
        // }
        console.log(`Try ${b+1} with ${iterations} iterations took ${(thisResult/1000).toFixed(2)}s`);
      }
      result = result/tries
      // testDiv.parentNode.removeChild(testDiv);
      console.log(`Avg. of ${tries} tries with ${iterations} iterations took ${(result/1000).toFixed(2)}s (${result}ms)`)
    }
    </script>
  </body>
</html>
